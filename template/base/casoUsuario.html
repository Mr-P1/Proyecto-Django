{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jardiner√≠a Web</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'css/caso.css' %}">
  <link rel="icon" href="{% static 'assets/R.png' %}">
  <script src="https://kit.fontawesome.com/eb496ab1a0.js" crossorigin="anonymous"></script>

</head>

<body>


  <nav class="navbar navbar-expand-sm  w-100 container-fluid">
    <div class="container-fluid">


      <div class="navbar-brand">
        <img width="100px" height="90px" src="http://assets.stickpng.com/thumbs/5c6828543ce41c0ef9f4bd44.png" alt="">

      </div>

      <div class="navbar-collapse">
        <ul class="navbar-nav">

          <li class="nav-item">
            <a class="nav-link" href="{% url 'principalUsuario' %}">Inicio</a>
          </li>
          {%if suscripcion %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'desuscribirse' %}">Desuscribirse</a>
            </li>
          {%else%}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'suscripcion' %}">Suscribirse</a>
            </li>
          {% endif %}
          <!-- <li class="nav-item">
            <a class="nav-link" href="{% url 'suscripcion' %}">Suscribirse</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="{% url 'desuscribirse' %}">Desuscribirse</a>
          </li> -->

          <li class="nav-item">
            <a class="nav-link" href="{% url 'promociones' %}">Promociones</a>
          </li>


          <li class="nav-item ">
            <div  class="dropdown nav-link " >
              <button  class="dp btn btn-block dropdown-toggle btn-sm bg-gradient" style="background-color: rgba(13, 138, 13, 0.767); color: aliceblue;" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                Categorias
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                {%for x in categorias%}
                  <li><a class="dropdown-item"  href="{% url 'listaCategoria' x.id %}">{{x.nombre}} {{x.id}}</a></li>
                {%endfor %} 
              </ul>
            </div>
          </li>


          <li class="nav-item">
            <a class="nav-link" href="{% url 'cerrar_sesion' %}">Cerrar sesion</a>
          </li>

          
            
          
          

          


        </ul>




      </div>

      <div class="btn-group  carro ">
        <button class="btn btn-secondary  " type="button" data-bs-toggle="dropdown" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="30px" fill="currentColor" class="bi bi-cart2"
            viewBox="0 0 16 16">
            <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 
                                       0 1-.5-.5zM3.14 5l1.25 5h8.22l1.25-5H3.14zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 
                                      0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z" />
          </svg>
          <span data-bs="carro.items" class="ml-1"></span>

        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="{% url 'carroCompra' %}">Ver carrito</a></li>
          <li><a class="dropdown-item" href="{% url 'histoCompra' %}">Historial de compra</a></li>
          <li><a class="dropdown-item" href="{% url 'seguimiento' %}">Seguimiento de compra</a></li>
        </ul>
      </div>



      <form class="d-flex nav-item" method="GET" action="{% url 'principalUsuario' %}" class="form-inline my-2 my-lg-0" >
        <input class="form-control mr-sm-2" type="search" name="buscar" placeholder="Buscar..." aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Buscar</button>
      </form>

      {% if user.username == 'admin' %}
      <div class="usuario nav-item">
        <a href="{% url 'vistaAdmin' %}" class="btn btn-success">
          <svg xmlns="http://www.w3.org/2000/svg" width="40px" height="30px" fill="currentColor"
            class="bi bi-person-square" viewBox="0 0 16 16 ">
            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 
                          1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z" />
          </svg>
        </a>
      </div>
      {% else %}

      {% endif%}
  </nav>
  <article class="fondo-carrusel ">

    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="https://media.revistaad.es/photos/60c74f4d1ed23cd4a0827f76/master/w_1600,c_limit/280370.jpg"
            class="d-block w-100" alt="...">
          <div class="carousel-caption d-none d-md-block">
            <h5>MACETEROS</h5>
          </div>
        </div>

        <div class="carousel-item">
          <img src="https://www.empresasdejardineria.cl/site/own/home-photo1.jpg" class="d-block w-100" alt="...">
          <div class="carousel-caption d-none d-md-block">
            <h5>TIERRA DE HOJAS</h5>
          </div>
        </div>

        <div class="carousel-item">
          <img src="https://c4.wallpaperflare.com/wallpaper/728/632/938/flores-naturaleza-pradera-wallpaper-preview.jpg"
            class="d-block w-100" alt="...">
          <div class="carousel-caption d-none d-md-block">
            <h5>FLORES</h5>
          </div>
        </div>

        <div class="carousel-item">
          <img
            src="https://www.compo.de/.imaging/focus/dam/global/articles/garden/boxtree-care_Buchsbaum-Pflege_01.jpg/jcr:content.jpeg"
            class="d-block w-100" alt="...">
          <div class="carousel-caption d-none d-md-block">
            <h5>ARBUSTOS</h5>
          </div>
        </div>

        <div class="carousel-item">
          <img src="http://viverodonfelipe.com.ar/wp-content/uploads/2020/11/beginner-gardening-tools-feat.jpg"
            class="d-block w-100" alt="...">
          <div class="carousel-caption d-none d-md-block">
            <h5>PRODUCTOS DE JARDINERIA</h5>
          </div>
        </div>

      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>


  </article>

  <!-- separador ribbon -->
  <div class="separator-ribbon">
    <div class="content "></div>
  </div>



  <!--prueba -->

  <div class="card-group row-cols-md-2 g-4 container-fluid">

    {% if productos %}
    {% for producto in productos %}
    {% if producto.stock > 0%}
      {%if producto.id_Promocion.porc_descuento == 0 %}
      <div class="col p-2 text-center">
        <div class="card h-10  rounded float-center card-border">
          <img style="height: 200px; width: 200px; " class="card-img-top rounded mx-auto d-block"
            src="{{producto.imagen.url}}" alt="...">
          <div class="card-body">
            <h5 class="card-title">{{ producto.descripcion}}</h5>
            <p class="card-text">CLP {{producto.precio}} </p>
            <a href="{% url 'agregar2' producto.id  %}" class="btn btn-primary">Agregar al Carrito</a>
          </div>
          <div class="card-footer text-muted">
            {{producto.stock}} restantes
          </div>
        </div>
      </div>
      {%else%}
      
      
      {%endif%}
    
    {%elif producto.stock == 0 and producto.id_Promocion.porc_descuento == 0 %}
      <div class="col p-2 text-center">
        <div class="card h-10  rounded float-center card-border">
          <img style="height: 200px; width: 200px; " class="card-img-top rounded mx-auto d-block"
            src="{{producto.imagen.url}}" alt="...">
          <div class="card-body">
            <h5 class="card-title">{{ producto.descripcion}}</h5>
            <p class="card-text"><del> CLP {{producto.precio}} </del></p>
            <a href="#" class="btn btn-primary"><del> Agregar al Carrito</del></a>
          </div>
          <div class="card-footer text-muted">
            {{producto.stock}} Stock!
          </div>
        </div>
      </div>
    {% endif %}


    {% endfor %}
    {% else%}
    <h2 class="text-center">No hay productos aun</h2>
    {% endif %}

  </div>





  <footer class="pie-pagina">
    <div class="grupo-1">
      <div class="box">
        <figure>

          <div class="d-flex  col-2">
            <img src="{% static 'assets/R.png' %}" alt="" width="85px" height="85vh">
          </div>

        </figure>
      </div>
      <div class="box">
        <h1>Horario</h1>
        <h5>
          <p> 08:00 y 17:30 hrs.</p>
        </h5>
        <h6>
          <p>Lunes a Viernes</p>
        </h6>
      </div>
      <div class="box">
        <h2>SIGUENOS</h2>
        <div class="red-social">
          <a href="https://www.facebook.com/" class="fa fa-facebook"></a>
          <a href="https://www.instagram.com/" class="fa fa-instagram"></a>
          <a href="https://twitter.com/" class="fa fa-twitter"></a>
          <a href="https://www.youtube.com/" class="fa fa-youtube"></a>
        </div>
      </div>
    </div>

  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>

    {% block js %}
    {% if user.username == 'admin' %}
    <script>
      const URL_DATOS_JSON = "{% url 'usuario_json' %}"
      async function llamarDatosJson(){
        const peticion = await fetch(URL_DATOS_JSON, {
          headers: {
            "Content-Type": "application/json"
          }
        });
        const datos_json = await peticion.json();
        console.log(datos_json);
      }
      llamarDatosJson()
    
      
    </script>
    {% endif %}
    {% endblock js %}
</body>

</html>